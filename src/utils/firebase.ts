import { initializeApp } from 'firebase/app';import { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';export type FB={db:ReturnType<typeof getFirestore>}|null;let fb:FB=null;export function fbInit():FB{const cfg=(window as any).__FIREBASE__ as any;if(!cfg)return null;try{const app=initializeApp(cfg);const db=getFirestore(app);fb={db};return fb}catch(e){console.warn('Firebase init failed',e);return null}}export async function fbPushResponse(projectId:string,data:any){if(!fb) fbInit();if(!fb) return false;try{const col=collection(fb.db,'posicionamiento',projectId,'responses');await addDoc(col,{...data,createdAt:serverTimestamp()});return true}catch(e){console.warn('fb write failed',e);return false}}
